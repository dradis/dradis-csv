<% content_for :title, 'CSV Upload Mapping' %>

<% content_for :breadcrumbs do %>
  <nav>
    <ol class="breadcrumb">
      <li class="breadcrumb-item">
        <%= link_to 'Upload Manager', main_app.project_upload_manager_path(current_project) %>
      </li>
      <li class="breadcrumb-item active">CSV Upload Mapping</li>
    </ol>
  </nav>
<% end %>

<div class="content-container">
  <%= form_with url: project_upload_index_path(current_project), method: :post do |f| %>
    <table class="table table-striped mb-0"
      data-behavior="dradis-datatable"
      data-item-name="csv_item"
      data-local-storage-key="project.ce.<%= dom_id(current_project) %>.csv_mapping_datatable"
    >
      <thead>
        <tr>
          <th class="no-sort">Unique Indentifier</th>
          <th>Column Header From File</th>
          <th>Type</th>
        </tr>
      </thead>
          <tbody>
            <% @headers.each_with_index do |header, index| %>
              <tr>
                <td>
                  <div class="form-check">
                    <%= f.radio_button "identifier[#{index}][]", true, class: 'form-check-input' %>
                    <%= f.label :identifier, class: 'form-check-label' do %>
                      <span class="sr-only">Select</span>
                    <% end %>
                  </div>
                </td>
                <td><%= header %></td>
                <td>
                  <div class="form-group m-0">
                    <%= f.select "type[#{index}][]", ['Issue', 'Evidence', 'Node'], {}, class: 'form-control custom-select'%>
                  </div>
                </td>
              </tr>
            <% end %>
        </tbody>
    </table>
    <div class="form-actions">
      <%= f.submit 'Import CSV', class: 'btn btn-primary mr-1' %> or
      <%= link_to 'Cancel', main_app.project_upload_manager_path(current_project) %>
    </div>
  <% end %>
</div>
